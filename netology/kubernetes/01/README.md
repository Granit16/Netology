# Домашнее задание к занятию «Kubernetes. Причины появления. Команда kubectl»

## Задание 1. Установка MicroK8S

1. Была создана ВМ в Yandex.Cloud **Ubuntu 24.04.2 LTS**, на ней было установлено microk8s: ```sudo snap install microk8s --classic```
2. Были установлены dashboard и dashboard-proxy: ```microk8s enable dashboard``` и ```microk8s enable dashboard-proxy```.
3. В файле **/var/snap/microk8s/current/certs/csr.conf.template** был добавлен внешний ip-адрес ВМ, а затем были обновлены сертификаты ```sudo microk8s refresh-certs --cert front-proxy-client.crt```.

![](https://github.com/Granit16/Netology/blob/main/netology/kubernetes/01/pics/microk8s_status.png)
    https://github.com/Granit16/Netology/blob/main/netology/kubernetes/01/pics/microk8s_status.png
    

## Задача 2: Логи

Для сбора и анализа логов, я бы предложил стек ELK (Elasticsearch, Logstash, Kibana). Этот стек удовлетворяет всем требованиям и предоставляет масштабируемое решение для централизованного сбора, хранения и анализа логов.

ELK/EFK стек:

Elasticsearch — высокопроизводительный движок для хранения и поиска данных. Он используется для индексирования и хранения логов, что позволяет эффективно выполнять поиск и фильтрацию по записям.

Logstash — агент для сбора и доставки логов. Эти инструменты собирают логи из разных источников (stdout приложений, файловые логи, системные логи) и передают их в Elasticsearch.

Kibana — мощный веб-интерфейс для визуализации данных, собранных в Elasticsearch. Он позволяет разработчикам выполнять поиск по логам, создавать фильтры и дашборды, а также сохранять и делиться результатами поиска.

Logstash собирает логи и доставляет их в Elasticsearch, пользовательским интерфейсом в данном случае выступает Kibana.


## Задача 3: Мониторинг

Мониторинг состояния хостов и сервисов можно организовать на основе стека Prometheus + Grafana, который соответствует нашим требованиям.

Prometheus — это система мониторинга и сбора метрик с функциями алертинга, оптимизированная для микросервисной архитектуры. Она хорошо интегрируется с различными облачными и локальными решениями, а также с контейнеризированными сервисами.

Grafana — это инструмент для визуализации данных, собранных Prometheus, с поддержкой различных панелей и дашбордов.

Также потребуется экспортёр метрик Node Exporter - это стандартный инструмент Prometheus для мониторинга состояния ресурсов хостов (CPU, RAM, диски, сеть и т.д.).

Эта архитектура позволяет эффективно собирать метрики, отслеживать состояние хостов и микросервисов, а также быстро реагировать на возникающие проблемы.
